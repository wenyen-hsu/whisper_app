{"ast":null,"code":"var _jsxFileName = \"/Users/wenhsu/Documents/my_project/whisper/frontend/src/components/UploadArea.jsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Box, Typography, LinearProgress, Paper, Button, TextField, Dialog, DialogTitle, DialogContent, DialogActions, List, ListItem, ListItemButton, ListItemText } from '@mui/material';\nimport { fetchServerDirs } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadArea = ({\n  onFileAccepted,\n  uploading,\n  progress,\n  onRecordClick,\n  savePath,\n  setSavePath\n}) => {\n  _s();\n  const [dirDialogOpen, setDirDialogOpen] = useState(false);\n  const [dirs, setDirs] = useState([]);\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles.length > 0) {\n      onFileAccepted(acceptedFiles[0]);\n    }\n  }, [onFileAccepted]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'audio/wav': ['.wav'],\n      'audio/mp3': ['.mp3'],\n      'audio/mpeg': ['.mp3'],\n      'video/mp4': ['.mp4'],\n      'audio/mp4': ['.mp4'],\n      'audio/x-m4a': ['.m4a'],\n      'audio/m4a': ['.m4a'],\n      'audio/webm': ['.webm']\n    },\n    maxSize: 500 * 1024 * 1024\n  });\n  const handleBrowseDir = async e => {\n    e.stopPropagation();\n    setDirDialogOpen(true);\n    const dirs = await fetchServerDirs();\n    setDirs(dirs);\n  };\n  const handleDirSelect = dir => {\n    setSavePath(dir + '/myresult');\n    setDirDialogOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    ...getRootProps(),\n    sx: {\n      p: 4,\n      textAlign: 'center',\n      bgcolor: 'background.default',\n      border: '2px dashed',\n      borderColor: isDragActive ? 'primary.main' : 'grey.500',\n      cursor: 'pointer'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ...getInputProps()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      color: \"text.secondary\",\n      children: isDragActive ? '放開檔案以上傳' : '拖曳或點擊以上傳音訊/影片檔案 (WAV/MP3/MP4/M4A, 500MB 以內)'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        gap: 1,\n        mt: 2,\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"\\u5132\\u5B58\\u8DEF\\u5F91 (\\u4E0D\\u542B\\u526F\\u6A94\\u540D)\",\n        variant: \"outlined\",\n        size: \"small\",\n        fullWidth: true,\n        value: savePath,\n        onChange: e => setSavePath(e.target.value),\n        placeholder: \"\\u5982 uploads/myresult\",\n        disabled: uploading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: handleBrowseDir,\n        disabled: uploading,\n        children: \"\\u700F\\u89BD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: dirDialogOpen,\n      onClose: () => setDirDialogOpen(false),\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"\\u9078\\u64C7\\u4F3A\\u670D\\u5668\\u8CC7\\u6599\\u593E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(List, {\n          children: dirs.map(dir => /*#__PURE__*/_jsxDEV(ListItem, {\n            disablePadding: true,\n            children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n              onClick: () => handleDirSelect(dir),\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: dir\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)\n          }, dir, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setDirDialogOpen(false),\n          children: \"\\u53D6\\u6D88\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      sx: {\n        mt: 2\n      },\n      onClick: e => {\n        e.stopPropagation();\n        onRecordClick && onRecordClick();\n      },\n      children: \"\\u5373\\u6642\\u9304\\u97F3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), uploading && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(LinearProgress, {\n        variant: \"determinate\",\n        value: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadArea, \"Ukj1WieRvzZlfvP64HV+AC6DTRo=\", false, function () {\n  return [useDropzone];\n});\n_c = UploadArea;\nexport default UploadArea;\nvar _c;\n$RefreshReg$(_c, \"UploadArea\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useDropzone","Box","Typography","LinearProgress","Paper","Button","TextField","Dialog","DialogTitle","DialogContent","DialogActions","List","ListItem","ListItemButton","ListItemText","fetchServerDirs","jsxDEV","_jsxDEV","UploadArea","onFileAccepted","uploading","progress","onRecordClick","savePath","setSavePath","_s","dirDialogOpen","setDirDialogOpen","dirs","setDirs","onDrop","acceptedFiles","length","getRootProps","getInputProps","isDragActive","accept","maxSize","handleBrowseDir","e","stopPropagation","handleDirSelect","dir","sx","p","textAlign","bgcolor","border","borderColor","cursor","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","color","display","gap","mt","mb","label","size","fullWidth","value","onChange","target","placeholder","disabled","onClick","open","onClose","map","disablePadding","primary","_c","$RefreshReg$"],"sources":["/Users/wenhsu/Documents/my_project/whisper/frontend/src/components/UploadArea.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Box, Typography, LinearProgress, Paper, Button, TextField, Dialog, DialogTitle, DialogContent, DialogActions, List, ListItem, ListItemButton, ListItemText } from '@mui/material';\nimport { fetchServerDirs } from '../services/api';\n\nconst UploadArea = ({ onFileAccepted, uploading, progress, onRecordClick, savePath, setSavePath }) => {\n  const [dirDialogOpen, setDirDialogOpen] = useState(false);\n  const [dirs, setDirs] = useState([]);\n\n  const onDrop = useCallback((acceptedFiles) => {\n    if (acceptedFiles.length > 0) {\n      onFileAccepted(acceptedFiles[0]);\n    }\n  }, [onFileAccepted]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'audio/wav': ['.wav'],\n      'audio/mp3': ['.mp3'],\n      'audio/mpeg': ['.mp3'],\n      'video/mp4': ['.mp4'],\n      'audio/mp4': ['.mp4'],\n      'audio/x-m4a': ['.m4a'],\n      'audio/m4a': ['.m4a'],\n      'audio/webm': ['.webm']\n    },\n    maxSize: 500 * 1024 * 1024\n  });\n\n  const handleBrowseDir = async (e) => {\n    e.stopPropagation();\n    setDirDialogOpen(true);\n    const dirs = await fetchServerDirs();\n    setDirs(dirs);\n  };\n\n  const handleDirSelect = (dir) => {\n    setSavePath(dir + '/myresult');\n    setDirDialogOpen(false);\n  };\n\n  return (\n    <Paper {...getRootProps()} sx={{ p: 4, textAlign: 'center', bgcolor: 'background.default', border: '2px dashed', borderColor: isDragActive ? 'primary.main' : 'grey.500', cursor: 'pointer' }}>\n      <input {...getInputProps()} />\n      <Typography variant=\"h6\" color=\"text.secondary\">\n        {isDragActive ? '放開檔案以上傳' : '拖曳或點擊以上傳音訊/影片檔案 (WAV/MP3/MP4/M4A, 500MB 以內)'}\n      </Typography>\n      <Box sx={{ display: 'flex', gap: 1, mt: 2, mb: 2 }}>\n        <TextField\n          label=\"儲存路徑 (不含副檔名)\"\n          variant=\"outlined\"\n          size=\"small\"\n          fullWidth\n          value={savePath}\n          onChange={e => setSavePath(e.target.value)}\n          placeholder=\"如 uploads/myresult\"\n          disabled={uploading}\n        />\n        <Button variant=\"outlined\" onClick={handleBrowseDir} disabled={uploading}>瀏覽</Button>\n      </Box>\n      <Dialog open={dirDialogOpen} onClose={() => setDirDialogOpen(false)}>\n        <DialogTitle>選擇伺服器資料夾</DialogTitle>\n        <DialogContent>\n          <List>\n            {dirs.map((dir) => (\n              <ListItem key={dir} disablePadding>\n                <ListItemButton onClick={() => handleDirSelect(dir)}>\n                  <ListItemText primary={dir} />\n                </ListItemButton>\n              </ListItem>\n            ))}\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setDirDialogOpen(false)}>取消</Button>\n        </DialogActions>\n      </Dialog>\n      <Button variant=\"contained\" color=\"primary\" sx={{ mt: 2 }} onClick={e => { e.stopPropagation(); onRecordClick && onRecordClick(); }}>\n        即時錄音\n      </Button>\n      {uploading && <Box sx={{ mt: 2 }}><LinearProgress variant=\"determinate\" value={progress} /></Box>}\n    </Paper>\n  );\n};\n\nexport default UploadArea;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}