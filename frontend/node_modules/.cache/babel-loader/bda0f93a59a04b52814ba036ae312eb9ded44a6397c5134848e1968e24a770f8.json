{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { uploadAudio } from '../services/api';\nconst useUpload = () => {\n  _s();\n  const [uploading, setUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(null);\n  const upload = async file => {\n    setUploading(true);\n    setProgress(0);\n    setError(null);\n    setResult(null);\n    try {\n      const response = await uploadAudio(file, e => {\n        if (e.total) setProgress(Math.round(e.loaded * 100 / e.total));\n      });\n      setResult(response.data.data);\n    } catch (err) {\n      // 更詳細的錯誤訊息顯示\n      if (err.response) {\n        var _err$response$data;\n        setError(`伺服器錯誤 (${err.response.status}): ` + (((_err$response$data = err.response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || JSON.stringify(err.response.data)));\n      } else if (err.request) {\n        setError('無法連線到伺服器，請確認後端 API 是否啟動');\n      } else {\n        setError('未知錯誤: ' + err.message);\n      }\n    } finally {\n      setUploading(false);\n    }\n  };\n  return {\n    uploading,\n    progress,\n    result,\n    error,\n    upload\n  };\n};\n_s(useUpload, \"42Am1O6PtBgKl7IWzP3lerihfVc=\");\nexport default useUpload;","map":{"version":3,"names":["useState","uploadAudio","useUpload","_s","uploading","setUploading","progress","setProgress","result","setResult","error","setError","upload","file","response","e","total","Math","round","loaded","data","err","_err$response$data","status","message","JSON","stringify","request"],"sources":["/Users/wenhsu/Documents/my_project/whisper/frontend/src/hooks/useUpload.js"],"sourcesContent":["import { useState } from 'react';\nimport { uploadAudio } from '../services/api';\n\nconst useUpload = () => {\n  const [uploading, setUploading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState(null);\n\n  const upload = async (file) => {\n    setUploading(true);\n    setProgress(0);\n    setError(null);\n    setResult(null);\n    try {\n      const response = await uploadAudio(file, (e) => {\n        if (e.total) setProgress(Math.round((e.loaded * 100) / e.total));\n      });\n      setResult(response.data.data);\n    } catch (err) {\n      // 更詳細的錯誤訊息顯示\n      if (err.response) {\n        setError(\n          `伺服器錯誤 (${err.response.status}): ` +\n          (err.response.data?.message || JSON.stringify(err.response.data))\n        );\n      } else if (err.request) {\n        setError('無法連線到伺服器，請確認後端 API 是否啟動');\n      } else {\n        setError('未知錯誤: ' + err.message);\n      }\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return { uploading, progress, result, error, upload };\n};\n\nexport default useUpload;\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,iBAAiB;AAE7C,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMY,MAAM,GAAG,MAAOC,IAAI,IAAK;IAC7BR,YAAY,CAAC,IAAI,CAAC;IAClBE,WAAW,CAAC,CAAC,CAAC;IACdI,QAAQ,CAAC,IAAI,CAAC;IACdF,SAAS,CAAC,IAAI,CAAC;IACf,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAMb,WAAW,CAACY,IAAI,EAAGE,CAAC,IAAK;QAC9C,IAAIA,CAAC,CAACC,KAAK,EAAET,WAAW,CAACU,IAAI,CAACC,KAAK,CAAEH,CAAC,CAACI,MAAM,GAAG,GAAG,GAAIJ,CAAC,CAACC,KAAK,CAAC,CAAC;MAClE,CAAC,CAAC;MACFP,SAAS,CAACK,QAAQ,CAACM,IAAI,CAACA,IAAI,CAAC;IAC/B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ;MACA,IAAIA,GAAG,CAACP,QAAQ,EAAE;QAAA,IAAAQ,kBAAA;QAChBX,QAAQ,CACN,UAAUU,GAAG,CAACP,QAAQ,CAACS,MAAM,KAAK,IACjC,EAAAD,kBAAA,GAAAD,GAAG,CAACP,QAAQ,CAACM,IAAI,cAAAE,kBAAA,uBAAjBA,kBAAA,CAAmBE,OAAO,KAAIC,IAAI,CAACC,SAAS,CAACL,GAAG,CAACP,QAAQ,CAACM,IAAI,CAAC,CAClE,CAAC;MACH,CAAC,MAAM,IAAIC,GAAG,CAACM,OAAO,EAAE;QACtBhB,QAAQ,CAAC,yBAAyB,CAAC;MACrC,CAAC,MAAM;QACLA,QAAQ,CAAC,QAAQ,GAAGU,GAAG,CAACG,OAAO,CAAC;MAClC;IACF,CAAC,SAAS;MACRnB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,OAAO;IAAED,SAAS;IAAEE,QAAQ;IAAEE,MAAM;IAAEE,KAAK;IAAEE;EAAO,CAAC;AACvD,CAAC;AAACT,EAAA,CAlCID,SAAS;AAoCf,eAAeA,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}